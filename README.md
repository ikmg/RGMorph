# RGMorph (изменение склонений)

Объединяет работу двух библиотек: 
- [pymorphy2](https://pymorphy2.readthedocs.io/en/stable/index.html)
- [petrovich](https://pypi.org/project/Petrovich/)

### Важно!

1. Не является универсальным средством. 
2. В качестве входных значений предполагается наличие слов исключительно в начальной форме (именительный падеж, единственное число). 
3. Работа настроена для использования при изменении склонений:
- _воинских (специальных) званий и(или) классных чинов, дипломатических рангов;_ 
- _фамилии, имени и(или) отчества;_
- _наименования должности, подразделения и(или) субъекта._

**Примечание:** _используется морфологический разбор слов основанный на тегах **[OpenCorpora](http://opencorpora.org/dict.php?act=gram)** и выбор подходящего варианта для изменения склонения._

### Особенности

При выявлении особых случаев, когда фамилия, имя или отчество склоняются неправильно, либо вообще не склоняются, они могут быть добавлены в набор правил (файл **rules.json**) в качестве исключений с явным указанием окончаний для каждого падежа. 

## Падежи
В методах классов используется аргумент `case: str`, для которого падежи указываются в привычной форме: 
- **именительный** - есть (кто/что), 
- **родительный** - нет (кого/чего), 
- **дательный** - рад (кому/чему), 
- **винительный** - вижу (кого/что), 
- **творительный** - горжусь (кем/чем), 
- **предложный** - мечтаю (о ком/о чем).

## Класс FIO

Изменяет склонение фамилии, имени и(или) отчества, при этом каждый именованный аргумент не является обязательным.

### Инициализация

```
from rg_morph import FIO


person = {
    'lastname': 'Иванов',
    'firstname': 'Иван',
    'middlename': 'Иванович',
    'gender': 'male'
}

fio = FIO(**person)
```

### Изменение склонения

Изменение склонения производится методом `.morph(case: str, to_string: bool = False) -> dict | str`
- `case: str` - наименование падежа;
- `to_string: bool` - результат склонения ФИО конкатенирует в строку (по-умолчанию True).

```
print(fio.morph(case='родительный', to_string=True))
>>> Иванова Ивана Ивановича

print(fio.morph(case='предложный', to_string=False))
>>> {'lastname': 'Иванове', 'firstname': 'Иване', 'middlename': 'Ивановиче'}
```


## Класс Text

Изменяет склонения воинских (специальных) званий и(или) классных чинов, 
дипломатических рангов, а также наименования должности, подразделения и(или) субъекта.


### Инициализация
```
from rg_morph import Text

text = Text('это "текст для" изменения склонения')
```

### Изменение склонения

Изменение склонения производится методом `.morph(case: str, ignore_text_in_quotes: bool = True) -> str`
- `case: str` - наименование падежа;
- `ignore_text_in_quotes: bool` - игнорировать (не склонять) текст в кавычках (по-умолчанию True).

```
print(text.morph(case='родительный', ignore_text_in_quotes=True))
>>> этого "текст для" изменения склонения

print(text.morph(case='предложный', ignore_text_in_quotes=False))
>>> этом "тексте для" изменения склонения
```


## Класс Morph

Комплексное изменение склонений. 

Класс `Morph` является инструментом для изменения склонений в установочных данных о персоне 
(ФИО, звание, должность, подразделение, субъект) чтобы использовать его в разных частях программы 
для изменения склонений одних и тех же данных.

### Инициализация

```
from rg_morph import Morph


person_item = {
    'lastname': 'Фамилия',
    'firstname': 'Имя',
    'middlename': 'Отчество',
    'gender': 'male',
    'rank': 'рядовой',
    'post': 'стрелок 1 взвода 1 роты',
    'unit': '1 батальон охраны',
    'subject': 'войсковая часть 0000'
}

employee = Morph(**person_item)
```

Атрибуты класса:
- `.fio: FIO` - фамилия, имя, отчество, пол (экземпляр класса FIO);
- `.rank: Text` - звание (экземпляр класса Text);
- `.post: Text` - должность (экземпляр класса Text);
- `.unit: Text` - подразделение (экземпляр класса Text);
- `.subject: Text` - субъект (экземпляр класса Text);
- `.text: Text` - резервный произвольный текст (экземпляр класса Text).

### Изменение склонения

Изменение склонений атрибутов класса `Morph` производится в соответствии с работой указанных классов.

Пример:
```
employee.fio.morph(case='родительный', to_string=True)
employee.rank.morph(case='дательный', ignore_text_in_quotes=False)
employee.subject.morph(case='винительный', ignore_text_in_quotes=True)
```

### Совместимость с предыдущей версией

Для совместимости с предыдущей версией в классе `Morph` существует метод 
`.phrase(case: str, text: str, ignore_text_in_quotes: bool = True)`. 
Метод использует для работы атрибут `.text`.

Пример:
```
employee.phrase(case='родительный', text='какой-то случайный текст', ignore_text_in_quotes=False)
```
